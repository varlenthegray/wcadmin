{% extends 'communication/compose_email.html' %}

{% load static %}

{% block title %}All Templates{% endblock %}
{% block page_header %}All Templates{% endblock %}

{% block email_action %}
    <div>
        <div class="d-flex align-items-center p-3 border-bottom tx-16">
            <i class="fa fa-fw fa-envelope-open-text me-2"></i> Sent Email
        </div>
    </div>

    <div class="p-3 pb-0">
        <table class="table table-sm">
            {% if emailhistory_list %}
                <tr>
                    <th>Actions</th>
                    <th>Subject</th>
                    <th>Sent On</th>
                    <th>Sent By</th>
                </tr>
                {% for sent_email in emailhistory_list %}
                    <tr>
                        <td></td>
                        <td>{{ sent_email.subject }}</td>
                        <td>{{ sent_email.last_updated_on|date:'m-d-Y h:i A' }}</td>
                        <td>{% if sent_email.user.name %}{{ sent_email.user.name }}{% else %}{{ sent_email.user.username }}{% endif %}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td class="text-center">
                        The database doesn't lie... I can't find any emails that have been sent.<br />
                        Want to <a href="{% url 'emailCompose' %}">send an email?</a>
                    </td>
                </tr>
            {% endif %}
        </table>
    </div>
{% endblock %}