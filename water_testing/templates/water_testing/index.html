{% extends 'base.html' %}
{% load static %}

{% block page_header %}Water Testing{% endblock %}
{% block title %}Water Test Results{% endblock %}

{% block page_content %}
    <div class="col-12 stretch-card">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-baseline mb-2">
                    <h6 class="card-title mb-0">All Test Results</h6>
                    <div class="dropdown mb-2">
                        <button class="btn p-0" type="button" id="dropdownMenuButton7" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="icon-lg text-muted pb-3px mdi mdi-dots-horizontal"></i>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton7">
                            {% include 'base/datatable_dropdown.html' %}
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table" id="water_test_results">
                        <thead>
                        <tr>
                            <th>Contact Name</th>
                            <th>Sample Date</th>
                            <th>Sample Address</th>
                            <th>Sample point</th>
                            <th>Job Site</th>
                            <th>Template</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for test in object_list %}
                            <tr>
                                <td><a href="{% url 'viewWaterReport' pk=test.pk %}" target="_blank">{{ test.name }}</a></td>
                                <td>{{ test.sample_date|date:"M j, Y P" }}</td>
                                <td>{{ test.sample_address }}</td>
                                <td>{{ test.sample_point }}</td>
                                <td>{% if test.job_site.name|length > 40 %}<abbr title="{{ test.job_site.name }}">{% endif %}{{ test.job_site.name|truncatechars:40 }}</abbr></td>
                                <td>{{ test.template.name|default:"N/A" }}</td>
                            </tr>
                        {% empty %}
                            <tr><td colspan="6" class="text-center"><em>Unable to locate any water test results, master.</em></td></tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block page_script %}

{% endblock %}